!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=1)}([function(e,n,t){var r;e.exports=(r={ignore:[],scale:1},function(e,n){void 0===n&&(n=r);try{var t=(n=Object.assign({},r,n)).ignore,o=n.scale;return(o>1||o<=0)&&console.warn("You set scale to "+o+", which isn't between 0-1. This is either pointless (> 1) or a no-op (≤ 0)"),Promise.resolve(function(e,n){void 0===n&&(n=1);var t=new Image;return e.startsWith("data")||(t.crossOrigin="Anonymous"),new Promise((function(r,o){t.onload=function(){var e=t.width*n,o=t.height*n,a=function(e,n){var t=document.createElement("canvas");return t.setAttribute("width",e),t.setAttribute("height",n),t.getContext("2d")}(e,o);a.drawImage(t,0,0,e,o);var c=a.getImageData(0,0,e,o);r(c.data)};var a=function(){return o(new Error("An error occurred attempting to load image"))};t.onerror=a,t.onabort=a,t.src=e}))}(e,o)).then((function(e){return function(e,n){for(var t={},r=0;r<e.length;r+=4){var o=e[r+3];if(0!==o){var a=Array.from(e.subarray(r,r+3));if(-1===a.indexOf(void 0)){var c=o&&255!==o?"rgba("+a.concat([o]).join(",")+")":"rgb("+a.join(",")+")";-1===n.indexOf(c)&&(t[c]?t[c].count++:t[c]={color:c,count:1})}}}return Object.values(t).sort((function(e,n){return n.count-e.count}))}(e,t)}))}catch(e){return Promise.reject(e)}})},function(e,n,t){e.exports=t(2)},function(e,n,t){"use strict";t.r(n);var r=t(0),o=t.n(r);function a(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return c(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return c(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==t.return||t.return()}finally{if(u)throw a}}}}function c(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function i(e,n,t,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void t(e)}i.done?n(u):Promise.resolve(u).then(r,o)}function u(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function c(e){i(a,r,o,c,u,"next",e)}function u(e){i(a,r,o,c,u,"throw",e)}c(void 0)}))}}var s=window.XMLHttpRequest.prototype.open,l=[];document.cookie?["BWPrice","ColorPrice"].forEach((function(e){var n,t;l.push((n=e,(t=document.cookie.match(new RegExp("(?:^|; )"+n.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(t[1]):console.log("Price value - not found")))})):alert("Cookie files - disabled"),window.XMLHttpRequest.prototype.open=function(e,n,t,r,o){return this.addEventListener("load",(function(){try{console.log("_______________________ NEW ORDER _______________________");var e=JSON.parse(this.responseText),n=f(e);p(e,n)}catch(e){console.log("Something wrong - ".concat(e))}})),s.apply(this,arguments)};var f=function(e){if(!0===e.status)return e.file.url;console.log("Error: File is not upload")},p=function(e,n){var t=e.file.file_name.split(".").pop();"pdf"===t?b(n,t):"doc"===t||"docx"===t?d(n,t):console.log("This format is not supported")};function d(e,n){return m.apply(this,arguments)}function m(){return(m=u(regeneratorRuntime.mark((function e(n,t){var r,o,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ConvertApi.auth({secret:"4Bqw9aBNpF9bZaas"}),(o=r.createParams()).add("File",new URL("".concat(n))),"doc"!==t&&"docx"!==t){e.next=11;break}return e.next=6,r.convert("docx","pdf",o);case 6:a=e.sent,c=a.files[0].Url,b(c),e.next=16;break;case 11:if("pdf"!==t){e.next=16;break}return e.next=14,r.convert("pdf","jpg",o);case 14:v(e.sent);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return g.apply(this,arguments)}function g(){return(g=u(regeneratorRuntime.mark((function e(n){var t,r,c,i,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0,r=0,c=a(n.files),e.prev=3,c.s();case 5:if((i=c.n()).done){e.next=13;break}return u=i.value,e.next=9,o()("".concat(u.Url),{scale:.5});case 9:(s=e.sent).length<=256?r++:s.length>256&&t++;case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),c.e(e.t0);case 18:return e.prev=18,c.f(),e.finish(18);case 21:console.log("Count of Black&White pages: ".concat(r)),console.log("Count of Color pages: ".concat(t)),_(r,t);case 24:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})))).apply(this,arguments)}function _(e,n){return h.apply(this,arguments)}function h(){return(h=u(regeneratorRuntime.mark((function e(n,t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n*l[0]+t*l[1],console.log("Full price for all pages from document is: ".concat(r)),y(r);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=function(e){var n='\n    <ul>\n        <li class="wcpa_total">\n            <span>Total price by plugin: </span>\n            <span class="wcpa_price_outer">\n                <span class="wcpa_price">\n                    <span class="price_value">'.concat(e,'</span>\n                    <span class="woocommerce-Price-currencySymbol">₽</span>\n                </span>\n            </span>\n        </li>\n    </ul>'),t=document.querySelector(".wcpa_price_summary");t?t.insertAdjacentHTML("beforeend",n):alert("Summary field - not found. Please, add a summary field to the form")},b=function(e){pdfjsLib.GlobalWorkerOptions.workerSrc="../libs/pdfjs/build/pdf.worker.js",pdfjsLib.getDocument(e).promise.then((function(n){return n.getMetadata().then((function(e){try{console.log("\n            Metadata:\n            * Author: ".concat(e.info.Author,"  \n            * Creation Date: ").concat(e.info.CreationDate,"\n            * Format Version: ").concat(e.info.PDFFormatVersion,"\n            * Creator Tool: ").concat(e.metadata._metadataMap.get("xmp:creatortool"),"\n            * Producer: ").concat(e.metadata._metadataMap.get("pdf:producer")))}catch(e){console.log("Metadata - not available.")}})),d(e,"pdf"),n})).then((function(e){var n=e.numPages;return console.log("Total number pages in document: ".concat(n)),n}))}}]);